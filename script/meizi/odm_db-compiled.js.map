{"version":3,"sources":["odm_db.js"],"names":[],"mappings":"AAAA;;;AAGA;;;;;QAmCgB,Y,GAAA,Y;AAlChB,IAAI,cAAc,QAAQ,SAAR,EAAmB,WAArC;AACA,IAAI,cAAc,iCAAlB,C,CAAqD;AACrD;AACA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,SAAS,OAAT,CAAiB,WAAjB;AACA,MAAM,KAAK,SAAS,UAApB;;AAEA,GAAG,EAAH,CAAM,OAAN,EAAc,QAAQ,KAAR,CAAc,IAAd,CAAmB,OAAnB,EAA2B,mBAA3B,CAAd;AACA,GAAG,IAAH,CAAQ,MAAR,EAAe,UAAU,QAAV,EAAoB;AACjC,UAAQ,GAAR,CAAY,iBAAZ;AAED,CAHD;;AAMA,MAAM,SAAS,SAAS,MAAxB;;AAEA;AACA,MAAM,aAAa,OAAO;AACxB,QAAK,MADmB;AAExB,SAAM,MAFkB;AAGxB,SAAM,MAHkB;AAIxB,WAAQ,MAJgB;AAKxB,OAAI;AALoB,CAAP,CAAnB;;AAQA;;AAEA,IAAI,YAAY,SAAS,KAAT,CAAe,MAAf,EAAsB,UAAtB,CAAhB;;AAEA;;AAEA;AACA;;AAEO,SAAS,YAAT,CAAsB,IAAtB,EAA4B;AACjC;AACA,MAAG,gBAAgB,KAAnB,EAAyB;AACvB,cAAU,UAAV,CAAqB,MAArB,CAA4B,IAA5B,EAAiC,CAAC,GAAD,EAAK,IAAL,KAAY;AAC3C,UAAG,GAAH,EAAO;AACL,gBAAQ,GAAR,CAAY,qBAAZ,EAAkC,GAAlC;AACA,eAAO,QAAQ,MAAR,CAAe,GAAf,CAAP;AACD,OAHD,MAII;AACF,gBAAQ,GAAR,CAAY,wBAAZ,EAAqC,IAArC;AACA,eAAO,QAAQ,OAAR,EAAP;AACD;AACF,KATD;AAUD;AACD;AAZA,OAaK,IAAG,gBAAgB,MAAnB,EAA0B;AAC7B,UAAI,WAAW,IAAI,SAAJ,CAAc,IAAd,CAAf;AACA,eAAS,IAAT,CAAc,CAAC,GAAD,EAAK,QAAL,KAAgB;AAC5B,YAAG,GAAH,EAAO;AACL,kBAAQ,GAAR,CAAY,qBAAZ,EAAkC,GAAlC;AACA,iBAAO,QAAQ,MAAR,CAAe,GAAf,CAAP;AACD,SAHD,MAII;AACF,kBAAQ,GAAR,CAAY,wBAAZ,EAAqC,QAArC;AACA,iBAAO,QAAQ,OAAR,EAAP;AACD;AACF,OATD;AAUD;AACF","file":"odm_db-compiled.js","sourcesContent":["/**\n * Created by cly on 2017/4/27.\n */\n\"use strict\";\nvar MongoClient = require('mongodb').MongoClient;\nvar DB_CONN_STR = 'mongodb://localhost:27017/meizi'; // 数据库为 meizi\n// 首先引入 mongoose 这个模块\nvar mongoose = require('mongoose');\nmongoose.connect(DB_CONN_STR);\nconst db = mongoose.connection;\n\ndb.on('error',console.error.bind(console,'connection error:'));\ndb.once('open',function (callback) {\n  console.log(\"MongoDB Opened!\");\n\n});\n\n\nconst Schema = mongoose.Schema;\n\n//首页home的对象文档映射\nconst homeSchema = Schema({\n  href:String,\n  title:String,\n  thumb:String,\n  imgName:String,\n  tag:Array,\n});\n\n//然后创建home的Model\n\nvar homeModel = mongoose.model('home',homeSchema);\n\n//mongoose通过model创建mongodb中对应的collection\n\n//mongoose在内部创建collection时将我们传递的collection名（‘home’）小写化，同时如果小写化的名称后面没有字母——s,则会在其后面添加一s\n//变成homes\n\nexport function saveHomeList(list) {\n  //传递数组 批量插入\n  if(list instanceof Array){\n    homeModel.collection.insert(list,(err,docs)=>{\n      if(err){\n        console.log(\"insert home fail:%s\",err);\n        return Promise.reject(err);\n      }\n      else{\n        console.log(\"insert home success:%s\",docs);\n        return Promise.resolve();\n      }\n    })\n  }\n  //传递对象\n  else if(list instanceof Object){\n    var itemData = new homeModel(list);\n    itemData.save((err,itemData)=>{\n      if(err){\n        console.log(\"insert home fail:%s\",err);\n        return Promise.reject(err);\n      }\n      else{\n        console.log(\"insert home success:%s\",itemData);\n        return Promise.resolve();\n      }\n    })\n  }\n}\n\n\n"]}